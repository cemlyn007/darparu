"""
Originally copied from https://github.com/cartographer-project/cartographer/blob/master/bazel/third_party/freetype2.BUILD.
"""

load("@rules_cc//cc:defs.bzl", "cc_library")

cc_library(
    name = "freetype2",
    srcs = glob([
        "src/base/*.c",
        "src/cache/*.c",
        "src/cff/*.c",
        "src/sfnt/*.c",
        "src/gxvalid/*.c",
        "src/raster/*.c",
        "src/psnames/*.c",
        "src/truetype/*.c",
        "src/psaux/*.c",
        "src/otvalid/*.c",
        "src/cid/*.c",
        "src/pshinter/*.c",
        "src/pfr/*.c",
        "src/pcf/*.c",
        "src/autofit/*.c",
        "src/type42/*.c",
        "src/type1/*.c",
        "src/bzip2/*.c",
        "src/bdf/*.c",
        "src/smooth/*.c",
        "src/winfonts/*.c",
        "src/smooth/*.c",
    ]) + glob([
        "src/**/*.h",
        "include/freetype/internal/**/*.h",
    ]),
    hdrs = glob([
        "src/type42/*.c",
        "include/freetype/*.h",
        "include/*.h",
        "src/type1/*.c",
        "src/base/*.c",
        "src/bdf/*.c",
        "src/smooth/*.c",
        "src/cache/*.c",
        "src/cff/*.c",
        "src/sfnt/*.c",
        "src/gxvalid/*.c",
        "src/raster/*.c",
        "src/psnames/*.c",
        "src/truetype/*.c",
        "src/psaux/*.c",
        "src/otvalid/*.c",
        "src/cid/*.c",
        "src/pshinter/*.c",
        "src/pfr/*.c",
        "src/pcf/*.c",
        "src/lzw/*.c",
        "src/lzw/*.h",
        "src/gzip/*.c",
        "src/gzip/*.h",
        "src/autofit/*.c",
        "include/freetype/config/*.h",
    ]),
    copts = [
        "-Wno-covered-switch-default",
        "-Wno-implicit-function-declaration",
        "-DFT2_BUILD_LIBRARY",
        "-Ifreetype/config",
        "-iquote=src/base",
        "-iquote=src/sfnt",
        "-iquote=src/psaux",
        "-iquote=include/freetype",
        "-iquote=src/raster",
        "-iquote=src/autofit",
        "-iquote=src/pcf",
    ],
    defines = [
        "FT_CONFIG_OPTION_SYSTEM_ZLIB",
        "FT_CONFIG_OPTION_LZW",
        "FT_CONFIG_OPTION_GZIP",
    ],
    includes = [
        "include",
        "include/freetype",
        "include/freetype/config",
        "src/base",
    ],
    visibility = ["//visibility:public"],
    deps = [],
)
